(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{106:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(8),c=a.n(o),i=a(26),l=a(132),s=a(134),m=a(135),u=a(136),f=a(63),d=a.n(f),g=function(e){return r.a.createElement(l.a,{position:"static"},r.a.createElement(s.a,null,r.a.createElement(m.a,{color:"inherit","aria-label":"Menu"},r.a.createElement(d.a,{onClick:function(){e.navStatus?e.setNav(!1):e.setNav(!0)}})),r.a.createElement(u.a,{variant:"h6"},"Chatbot")))},h=a(42),b=a(138),p=a(141),v=a(143),E=a(142),x=a(146),w=a(144),j=a(145),O=a(147),y=a(41),T=a.n(y),k=a(64),C=a(65),N=a.n(C);function S(){return(S=Object(k.a)(T.a.mark(function e(t,a){var n;return T.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N.a.post("https://monash-agent-cayctx.appspot.com/dialogflow",{text:t,sessionId:a});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e)}))).apply(this,arguments)}var L=a(3),I=a(137),B=a(139),M=a(140),W=Object(O.a)(function(e){return{message:{textTransform:"none",marginTop:"10px"},right:{marginRight:"80%",borderColor:"blue"},left:{marginLeft:"80%",borderColor:"red"},card:{maxWidth:345},media:{height:140}}}),D=function(e){var t=W();return e.chatHistory.map(function(e){var a="bot"===e.from?Object(L.a)(t.message,t.right,e.from):Object(L.a)(t.message,t.left,e.from);return e.isText?r.a.createElement(I.a,{variant:"outlined",className:a},e.message):e.message.map(function(a){var n=a.card;return r.a.createElement(b.a,{className:Object(L.a)(t.card,t.left,e.from)},r.a.createElement(B.a,null,r.a.createElement(M.a,{className:t.media,image:n.imageUri}),r.a.createElement(p.a,null,r.a.createElement(u.a,{gutterBottom:!0,variant:"h5",component:"h2"},n.title),r.a.createElement(u.a,{variant:"body2",color:"textSecondary",component:"p"},n.subtitle))),r.a.createElement(E.a,null,r.a.createElement(I.a,{size:"small",color:"primary",href:n.buttons[0].postback},"Link")))})})},H=Object(O.a)(function(e){return{send:{marginRight:"0",marginLeft:"auto"},sendMessage:{marginLeft:"0",paddingLeft:"0",width:"95%"},message:{textTransform:"none",marginTop:"10px"},right:{marginRight:"80%",borderColor:"blue"},left:{marginLeft:"80%",borderColor:"red"},chatContainer:{height:"400px",overflowY:"auto"},card:{maxWidth:345},media:{height:140}}}),R=function(e,t){return t?(e.data.fulfillmentText?(a=e.data.fulfillmentText,e.isText=!0):(a=e.data.fulfillmentMessages,e.isText=!1),{message:a,time:Date.now(),from:"bot",isText:e.isText}):{message:e,time:Date.now(),from:"user",isText:!0};var a},J=null,z=!1,K=function(e){var t=H(),a=Object(n.useState)(""),o=Object(i.a)(a,2),c=o[0],l=o[1],s=Object(n.useState)(!1),m=Object(i.a)(s,2),u=m[0],f=m[1],d=Object(n.useState)([{message:"Hello I am a chatbot",time:Date.now(),from:"bot",isText:!0}]),g=Object(i.a)(d,2),O=g[0],y=g[1];Object(n.useEffect)(function(){""!==c&&!0===u?function(e,t){return S.apply(this,arguments)}(c,J).then(function(e){var t=R(e,!0);e.data.sessionId&&(J=e.data.sessionId);var a=[].concat(Object(h.a)(O),[t]);f(!1),l(""),y(a)}).catch(function(e){z=!0}):f(!1)},[u,c,O]);var T=function(){if(O.length>0&&"bot"===O[O.length-1].from&&!1===z){var e=R(c,!1);y([].concat(Object(h.a)(O),[e])),f(!0)}};return r.a.createElement(b.a,null,r.a.createElement(p.a,null,r.a.createElement(v.a,{className:t.chatContainer},r.a.createElement(D,{chatHistory:O}))),r.a.createElement(E.a,null,r.a.createElement(x.a,{id:"chat-textfield",className:t.sendMessage,value:c,margin:"normal",label:"chat",variant:"outlined",placeholder:"Send message",classes:{input:{borderBottom:!1}},onChange:function(e){l(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&T()}}),r.a.createElement(w.a,{disabled:z||u,color:"primary","aria-label":"Send",className:t.send,onClick:function(){return T()}},r.a.createElement(j.a,null,"send"))))};var P=function(){var e=Object(n.useState)(!1),t=Object(i.a)(e,2),a={navStatus:t[0],setNav:t[1]};return r.a.createElement("div",{className:"app"},r.a.createElement(g,a),r.a.createElement("div",null,r.a.createElement(K,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(P,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},68:function(e,t,a){e.exports=a(106)}},[[68,1,2]]]);
//# sourceMappingURL=main.b1237b81.chunk.js.map